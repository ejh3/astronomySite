# Interactive HR Diagram: try it [here!](https://ejh3.github.io/astronomySite/)
Heavily inspired by [this site](https://astro.unl.edu/mobile/HRdiagram/HRdiagramStable.html) which I've found very helpful. Though I was inspired by the original site, I didn't reference their code and used fabric.js, which is a simple framework with a low learning curve, while they used Dojo, which has more features and is more complex. You can see an history of the progress I made on the project [here](https://github.com/ejh3/astronomySite/commits/main). Anything that ends in a .html file on this page can be visited appending the file name to the main site address. These are mostly just some demos I used to figure things out. Though notably the last draft from ChatGPT can be found at https://ejh3.github.io/astronomySite/gptDraft.html. It was very helpful in getting started and in learning new things, but once things got more complex it took longer for me to explain in words what I needed it to do than to do it myself.

## About the cluster data
I got the cluster data by going to [VizieR](http://vizier.nao.ac.jp/viz-bin/VizieR) and picking a very comprehensive and popular dataset: the Extended Hipparcos Compilation (XHIP) by Anderson, E and Francis, Ch, published in the journal Astronomy Letters in May 2012. I selected the Luminosity, B-V magnitude, and group name as the three data points I was interested and filtered so that I only received data for stars which had all of these properties recorded. This ended up being around 1600 stars in 100 different groups/clusters. I was going to have my code read the table when the website loaded, but it actually ended up being easier to preprocess the data (see parseStarData.js for details) and embed the result directly into my code. That's why the first 300 lines of index.html are just data.

## About the calculations involved
One of the trickiest parts was figuring out how to get the lines of constant radius right. It's hard because the x and the y axis are in log scale, x axis is backwards, the window's coordinate system has origin at the top left, with increasing x, y as you go right and down, and the window size can change. To solve this I wrote a bunch of functions converting back and forth from window coordinates, to a standarized percent along x or y axis, to temperature and luminosity. Then I used the equation L = R^2 * T^4 where all units are solar units, fixed R at 1, then arbitrarily set T to 5 and 2 (which I converted to kelvin) to calculate the position of two points within the window. From that I could calculate the slope of the lines. I use the same equation to calculate the radius of the interactive star, though I raise that value to log_10(2) in order to double the displayed radius for every 10x increase. Otherwise it would be too large. I had some trouble finding details on how to convert kelvin into color. I eventually found code on someone's GitHub seems to work (though I don't know if it's mathematically rigorous) and gave credit to them in the source code. Oh also since the data has B-V magnitude instead of temperature, I use [Ballesteros' formula](https://www.wikipedia.com/en/Color_index) to convert to temperature, though I know it might not be the most accurate.
